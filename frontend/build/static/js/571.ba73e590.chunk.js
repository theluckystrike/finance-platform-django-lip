"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[571],{6375:(e,s,t)=>{t.d(s,{A:()=>i});var l=t(5043),a=t(3576),n=t(3216),r=t(5893),o=t(4193),c=t(579);const i=e=>{let{show:s,selected:t,handleClose:i,data:d,editingCategory:h,token:u,selectedPERnt:m,showDel:x}=e;(0,n.Zp)();const[p,b]=(0,r.aP)(),g=(0,o.A)(),[j,y]=(0,l.useState)(t),[f,v]=(0,l.useState)(m),[N,w]=(0,l.useState)(!1);(0,l.useEffect)((()=>{h?(y(h.name),v(m),w(!0)):(y(""),w(!1))}),[h,t]);return(0,c.jsx)(a.A,{size:"lg",fullscreen:"md-down","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:i,children:(0,c.jsxs)(a.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:[(0,c.jsx)("h4",{children:N?"Edit Category":"Create a Category"}),(0,c.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsxs)("div",{className:"row mx-0 px-3",children:[(0,c.jsxs)("div",{className:"col-12 m-0",children:[(0,c.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category Name"}),(0,c.jsx)("input",{id:"category",name:"category",className:"form-control m-0",value:j,onChange:e=>y(e.target.value),required:!0})]}),(0,c.jsxs)("div",{className:"col-12",children:[(0,c.jsx)("label",{htmlFor:"parent_category",className:"form-label",children:"parent_category Category"}),(0,c.jsxs)("div",{className:"dropdown",children:[(0,c.jsx)("input",{type:"text",placeholder:"All",value:f.name,readOnly:!0}),(0,c.jsxs)("div",{className:"dropdown-content",style:{height:"200px",overflow:"auto"},children:[(0,c.jsx)("span",{className:"h6  ",children:(0,c.jsx)("span",{className:"hover-span text-muted",onClick:()=>v({name:"",id:""}),children:"Null"})}),d.length>0&&d.map(((e,s)=>(0,c.jsx)("span",{className:"h6  ",children:(0,c.jsx)("span",{className:"hover-span ",onClick:()=>v(e),children:e.name})},e.name)))]})]})]}),(0,c.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,c.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),N&&(0,c.jsx)("button",{onClick:async()=>{i(),x(h)},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,c.jsx)("button",{onClick:i,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"}),(0,c.jsx)("button",{onClick:async()=>{await p({token:u.access,id:h.id,data:{name:j,parent_category:f.id}}),g.SuccessToast("Category updated successfully"),i()},className:"btn btn-dark col-3 px-3 fw-bold",type:"button",children:"Save"})]})]})})})]})})}},4571:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var l=t(5043),a=t(3204),n=t(6375),r=t(8152),o=t(579);const c=function(e,s){const[t,c]=(0,l.useState)([]),[i,d]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[m,x]=(0,l.useState)(!1),[p,b]=(0,l.useState)(null),[g,j]=(0,l.useState)(null),y=e=>{c((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))},f=(e,s)=>{b(e),u(s),(e=>{d(e),x(!0)})(e)},[v,N]=(0,l.useState)(!1),[w,C]=(0,l.useState)({});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("ul",{className:"tree-class",children:e.map(((e,s)=>(0,o.jsx)("li",{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("span",{onClick:()=>y(e.name),style:{cursor:"pointer"},children:[e.name,(0,o.jsx)(a.uO9,{onClick:s=>{s.stopPropagation(),f(e,{name:"",id:""})},style:{marginLeft:"8px",cursor:"pointer"}})]}),t.includes(e.name)&&e.subcategories&&(0,o.jsx)("ul",{children:e.subcategories.map(((s,l)=>(0,o.jsxs)("li",{children:[(0,o.jsxs)("span",{onClick:()=>y(s.name),style:{cursor:"pointer"},children:[s.name,(0,o.jsx)(a.uO9,{onClick:t=>{t.stopPropagation(),f(s,e)},style:{marginLeft:"8px",cursor:"pointer"}})]}),t.includes(s.name)&&s.subcategories&&(0,o.jsx)("ul",{children:s.subcategories.map(((e,t)=>(0,o.jsx)("li",{children:(0,o.jsx)("span",{onClick:()=>f({name:e.name},s),style:{cursor:"pointer"},children:e.name})},t)))})]},l)))})]})},s)))}),(0,o.jsx)(n.A,{show:m,handleClose:()=>{x(!1),b(null)},selected:i,selectedPERnt:h,editingCategory:p,data:e,token:s,showDel:e=>{C(e),N(!0)}}),(0,o.jsx)(r.A,{show:v,handleClose:()=>N(!1),token:s,data:w})]})},i=e=>{let{categoryFilter:s,token:t}=e;return(0,o.jsxs)("div",{className:"category-tree mx-auto col-3",children:[(0,o.jsx)("h3",{children:"Category Tree"}),c(s,t)]})};var d=t(3216),h=t(5061),u=t(5893);const m=()=>{const[e,s]=(0,l.useState)(JSON.parse(localStorage.getItem("login")));(0,l.useEffect)((()=>{const e=localStorage.getItem("login");e&&s(JSON.parse(e))}),[]);const t=(0,d.Zp)(),{data:a,isError:n}=(0,u.HP)({token:e.access}),r=(null===a||void 0===a?void 0:a.results)||[],[c,m]=(0,l.useState)([]);return(0,l.useEffect)((()=>{const e={};r.forEach((s=>{e[s.id]={...s,subcategories:[]}})),r.forEach((s=>{if(null===s.parent_category);else{const t=Object.values(e).find((e=>e.id===s.parent_category));t&&t.subcategories.push(e[s.id])}}));const s=Object.values(e).filter((e=>null===e.parent_category));m(s)}),[r]),(0,o.jsxs)("div",{className:"m-4",children:[(0,o.jsxs)("div",{className:"d-flex justify-content-start flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-2 text-center",children:[(0,o.jsx)("button",{className:"btn mb-3",onClick:()=>t(-1),children:(0,o.jsx)(h.A,{icon:"ArrowBack",size:"45px",color:"dark"})})," ",(0,o.jsx)("h3",{className:"h1 fw-bold",children:"Category manager"})]}),(0,o.jsx)(i,{categoryFilter:c,token:e})]})}},8152:(e,s,t)=>{t.d(s,{A:()=>i});var l=t(3576),a=t(3216),n=t(3003),r=t(5893),o=t(4193),c=t(579);const i=e=>{let{show:s,handleClose:t,data:i,token:d}=e;(0,a.Zp)(),(0,n.wA)();const[h,u]=(0,r.P8)(),m=(0,o.A)();return(0,c.jsx)(l.A,{size:"lg",fullscreen:"md-down","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:t,children:(0,c.jsx)(l.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsxs)("div",{className:"row mx-0 px-3",children:[(0,c.jsx)("div",{className:"col-12 m-0"}),(0,c.jsxs)("div",{className:"col-12  ",children:[(0,c.jsx)("h4",{children:"Delete Category"}),(0,c.jsxs)("p",{children:["Are you sure you want to delete ",i.name," category?"]})]}),(0,c.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,c.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),(0,c.jsx)("button",{onClick:async()=>{await h({token:d.access,id:null===i||void 0===i?void 0:i.id}),m.SuccessToast("Category delete successfully"),t()},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,c.jsx)("button",{onClick:t,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"})]})]})})})})}}}]);
//# sourceMappingURL=571.ba73e590.chunk.js.map