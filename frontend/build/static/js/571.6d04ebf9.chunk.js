"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[571],{6375:(e,s,t)=>{t.d(s,{A:()=>c});var a=t(5043),l=t(3576),n=t(3216),r=t(5893),o=t(579);const c=e=>{let{show:s,selected:t,handleClose:c,data:i,editingCategory:d,token:m}=e;(0,n.Zp)();const[u,h]=(0,r.aP)(),[x,p]=(0,r.P8)(),[g,j]=(0,a.useState)(t),[b,y]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1);(0,a.useEffect)((()=>{d?(j(d.name),v(!0)):(j(""),v(!1))}),[d,t]);return(0,o.jsx)(l.A,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:c,children:(0,o.jsxs)(l.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:[(0,o.jsx)("h4",{children:f?"Edit Category":"Create a Category"}),(0,o.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)("div",{className:"row mx-0 px-3",children:[(0,o.jsxs)("div",{className:"col-12 m-0",children:[(0,o.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category Name"}),(0,o.jsx)("input",{id:"category",name:"category",className:"form-control m-0",value:g,onChange:e=>j(e.target.value),required:!0})]}),(0,o.jsxs)("div",{className:"col-12",children:[(0,o.jsx)("label",{htmlFor:"parent_category",className:"form-label",children:"parent_category Category"}),(0,o.jsxs)("div",{className:"dropdown",children:[(0,o.jsx)("input",{type:"text",placeholder:"All",readOnly:!0}),(0,o.jsx)("div",{className:"dropdown-content",style:{height:"200px",overflow:"auto"},children:i.length>0&&i.map(((e,s)=>(0,o.jsx)("span",{className:"h6  ",children:(0,o.jsx)("span",{className:"hover-span ",children:e.name})},e.name)))})]})]}),(0,o.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,o.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),f&&(0,o.jsx)("button",{onClick:()=>{x({token:m.access,id:d.id}),c()},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,o.jsx)("button",{onClick:c,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"}),(0,o.jsx)("button",{onClick:()=>{u({token:m.access,id:d.id,data:{name:g}})},className:"btn btn-dark col-3 px-3 fw-bold",type:"button",children:"Save"})]})]})})})]})})}},4571:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var a=t(5043),l=t(3204),n=t(6375),r=t(579);const o=function(e,s){const[t,o]=(0,a.useState)([]),[c,i]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),x=e=>{i(e),m(!0)},p=e=>{o((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))},g=e=>{h(e),x(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{className:"tree-class",children:e.map(((e,s)=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{onClick:()=>p(e.name),style:{cursor:"pointer"},children:[e.name,(0,r.jsx)(l.uO9,{onClick:s=>{s.stopPropagation(),g(e)},style:{marginLeft:"8px",cursor:"pointer"}})]}),t.includes(e.name)&&e.subcategories&&(0,r.jsx)("ul",{children:e.subcategories.map(((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsxs)("span",{onClick:()=>p(e.name),style:{cursor:"pointer"},children:[e.name,(0,r.jsx)(l.uO9,{onClick:s=>{s.stopPropagation(),g(e)},style:{marginLeft:"8px",cursor:"pointer"}})]}),t.includes(e.name)&&e.subcategories&&(0,r.jsx)("ul",{children:e.subcategories.map(((e,s)=>(0,r.jsx)("li",{children:(0,r.jsx)("span",{onClick:()=>x(e),style:{cursor:"pointer"},children:e.name})},s)))})]},s)))})]})},s)))}),(0,r.jsx)(n.A,{show:d,handleClose:()=>{m(!1),h(null)},selected:c,editingCategory:u,data:e,token:s})]})},c=e=>{let{categoryFilter:s,token:t}=e;return(0,r.jsxs)("div",{className:"category-tree mx-auto w-25",children:[(0,r.jsx)("h3",{children:"Category Tree"}),o(s,t)]})};var i=t(3216),d=t(5061),m=t(5893);const u=()=>{const[e,s]=(0,a.useState)(JSON.parse(localStorage.getItem("login")));(0,a.useEffect)((()=>{const e=localStorage.getItem("login");e&&s(JSON.parse(e))}),[]);const t=(0,i.Zp)(),{data:l,isError:n}=(0,m.HP)({token:e.access}),o=(null===l||void 0===l?void 0:l.results)||[],[u,h]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e={};o.forEach((s=>{e[s.id]={...s,subcategories:[]}})),o.forEach((s=>{if(null===s.parent_category);else{const t=Object.values(e).find((e=>e.id===s.parent_category));t&&t.subcategories.push(e[s.id])}}));const s=Object.values(e).filter((e=>null===e.parent_category));h(s)}),[o]),(0,r.jsxs)("div",{className:"m-4",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-start flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-2 text-center",children:[(0,r.jsx)("button",{className:"btn mb-3",onClick:()=>t(-1),children:(0,r.jsx)(d.A,{icon:"ArrowBack",size:"45px",color:"dark"})})," ",(0,r.jsx)("h3",{className:"h1 fw-bold",children:"Category manager"})]}),(0,r.jsx)(c,{categoryFilter:u,token:e})]})}}}]);
//# sourceMappingURL=571.6d04ebf9.chunk.js.map