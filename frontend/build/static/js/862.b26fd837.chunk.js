"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[862],{6375:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(5043),l=t(3576),n=t(3216),o=t(5893),r=t(4193),i=t(8672),c=t(579);const d=e=>{let{show:s,selected:t,handleClose:d,data:m,editingCategory:h,categoryData:u,token:x,selectedPERnt:g,showDel:p}=e;(0,n.Zp)();const[b,j]=(0,o.aP)(),y=(0,r.A)(),[v,f]=(0,a.useState)(t),[w,A]=(0,a.useState)(g),[I,N]=(0,a.useState)(!1);(0,a.useEffect)((()=>{h?(f(h.name),A(g),N(!0)):(f(""),N(!1))}),[h,t]);const[k,C]=(0,a.useState)([]),[D,E]=(0,a.useState)(!1);return(0,c.jsx)(l.A,{size:"lg",fullscreen:"md-down","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:d,children:(0,c.jsxs)(l.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:[(0,c.jsx)("h4",{children:I?"Edit Category":"Create a Category"}),(0,c.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsxs)("div",{className:"row mx-0 px-3",children:[(0,c.jsxs)("div",{className:"col-12 m-0",children:[(0,c.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category Name"}),(0,c.jsx)("input",{id:"category",name:"category",className:"form-control m-0",value:v,onChange:e=>f(e.target.value),required:!0})]}),(0,c.jsxs)("div",{className:"col-12",children:[(0,c.jsx)("label",{htmlFor:"parent_category",className:"form-label",children:"Parent category"}),(0,c.jsxs)("div",{className:"dropdown",children:[(0,c.jsx)("div",{className:"arrow_down",children:(0,c.jsx)("img",{src:i,alt:""})}),(0,c.jsx)("input",{type:"text",placeholder:"Select a category",value:w.name,onChange:e=>{A({...w,name:e.target.value}),(e=>{if(""!==e){const s=null===e||void 0===e?void 0:e.trim(),t=u.filter((e=>e.name.toLowerCase().includes(s.toLowerCase())));C(t)}else C([])})(e.target.value)}}),(0,c.jsxs)("div",{className:"dropdown-content",style:{maxHeight:"200px",overflow:"auto",display:k.length>0?"block":"none"},children:["  ",(0,c.jsx)("span",{className:"h6  ",children:(0,c.jsx)("span",{className:"hover-span text-muted",onClick:()=>A({name:"",id:""}),children:"None"})}),k.length>0&&k.map(((e,s)=>(0,c.jsx)("span",{className:"h6 hover-span",onClick:async()=>{await A(e),C([])},children:e.name},e.name)))]})]})]}),(0,c.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,c.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),I&&(0,c.jsx)("button",{onClick:async()=>{d(),p(h)},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,c.jsx)("button",{onClick:d,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"}),(0,c.jsx)("button",{onClick:async()=>{await b({token:x.access,id:h.id,data:{name:v,parent_category:w.id}}),y.SuccessToast("Category updated successfully"),d()},className:"btn btn-dark col-3 px-3 fw-bold",type:"button",children:"Save"})]})]})})})]})})}},3862:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var a=t(5043),l=t(3204),n=t(6375),o=t(8152),r=t(579);const i=function(e,s,t){const[i,c]=(0,a.useState)([]),[d,m]=(0,a.useState)(""),[h,u]=(0,a.useState)(""),[x,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),j=e=>{c((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))},y=(e,s)=>{b(e),u(s),(e=>{m(e),g(!0)})(e)},[v,f]=(0,a.useState)(!1),[w,A]=(0,a.useState)({});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{className:"tree-class",children:e.map(((e,s)=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{onClick:()=>j(e.name),style:{cursor:"pointer"},children:[e.name,(0,r.jsx)(l.uO9,{onClick:s=>{s.stopPropagation(),y(e,{name:"",id:""})},style:{marginLeft:"8px",cursor:"pointer"}})]}),i.includes(e.name)&&e.subcategories&&(0,r.jsx)("ul",{children:e.subcategories.map(((s,t)=>(0,r.jsxs)("li",{children:[(0,r.jsxs)("span",{onClick:()=>j(s.name),style:{cursor:"pointer"},children:[s.name,(0,r.jsx)(l.uO9,{onClick:t=>{t.stopPropagation(),y(s,e)},style:{marginLeft:"8px",cursor:"pointer"}})]}),i.includes(s.name)&&s.subcategories&&(0,r.jsx)("ul",{children:s.subcategories.map(((e,t)=>(0,r.jsx)("li",{children:(0,r.jsx)("span",{onClick:()=>y({name:e.name},s),style:{cursor:"pointer"},children:e.name})},t)))})]},t)))})]})},s)))}),(0,r.jsx)(n.A,{show:x,handleClose:()=>{g(!1),b(null)},selected:d,selectedPERnt:h,editingCategory:p,data:e,token:t,categoryData:s,showDel:e=>{A(e),f(!0)}}),(0,r.jsx)(o.A,{show:v,handleClose:()=>f(!1),token:t,data:w})]})},c=e=>{let{categoryFilter:s,categoryData:t,token:a}=e;return(0,r.jsxs)("div",{className:"category-tree mx-auto w-25",children:[(0,r.jsx)("h3",{children:"Script Tree"}),i(s,t,a)]})};var d=t(3216),m=t(5061),h=t(5893);const u=()=>{const[e,s]=(0,a.useState)(JSON.parse(localStorage.getItem("login")));(0,a.useEffect)((()=>{localStorage.getItem("login")}),[]);const t=(0,d.Zp)(),{data:l,isError:n}=(0,h.HP)({token:e.access}),o=(null===l||void 0===l?void 0:l.results)||[],[i,u]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e={};o.forEach((s=>{e[s.id]={...s,subcategories:[]}})),o.forEach((s=>{if(null===s.parent_category);else{const t=Object.values(e).find((e=>e.id===s.parent_category));t&&t.subcategories.push(e[s.id])}}));const s=Object.values(e).filter((e=>null===e.parent_category));u(s)}),[o]),(0,r.jsxs)("div",{className:"m-4",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-start flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-2 text-center",children:[(0,r.jsx)("button",{className:"btn mb-3",onClick:()=>t(-1),children:(0,r.jsx)(m.A,{icon:"ArrowBack",size:"45px",color:"dark"})})," ",(0,r.jsx)("h3",{className:"h1 fw-bold",children:"Script Tree By Category"})]}),(0,r.jsx)(c,{categoryFilter:i,categoryData:o,token:e})]})}},8152:(e,s,t)=>{t.d(s,{A:()=>c});var a=t(3576),l=t(3216),n=t(3003),o=t(5893),r=t(4193),i=t(579);const c=e=>{let{show:s,handleClose:t,data:c,token:d}=e;(0,l.Zp)(),(0,n.wA)();const[m,h]=(0,o.P8)(),u=(0,r.A)();return(0,i.jsx)(a.A,{size:"lg",fullscreen:"md-down","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:t,children:(0,i.jsx)(a.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("div",{className:"row mx-0 px-3",children:[(0,i.jsx)("div",{className:"col-12 m-0"}),(0,i.jsxs)("div",{className:"col-12  ",children:[(0,i.jsx)("h4",{children:"Delete Category"}),(0,i.jsxs)("p",{children:["Are you sure you want to delete ",c.name," category?"]})]}),(0,i.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,i.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),(0,i.jsx)("button",{onClick:async()=>{await m({token:d.access,id:null===c||void 0===c?void 0:c.id}),u.SuccessToast("Category delete successfully"),t()},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,i.jsx)("button",{onClick:t,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"})]})]})})})})}},8672:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAADm5ubz8/MkJCQwMDD19fXw8PBXV1dQUFBZWVlTU1MuLi4pKSlYWFgmJiZeXl5mZmbExMRLS0vd3d2Dg4MfHx+tra2YmJjQ0NDh4eEODg6MjIxvb2/r6+toaGgYGBhDQ0M6OjoUjT9JAAAEKUlEQVR4nO3c6VbqMBQFYApaJgcUUVQcru//kBdvjCXNTihthhPu/n63y5yVM6QFHI2IiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIqHj3m9l6tX3IvYwTPWxX69nmvsOVL6vqn9ddHX1VAe1e1bJXR3fm4brSbiYplhbG2++qX5/9V74/Vo35NM3yBqs/Dlb9+O69dlMdmheSqHfGqje+S6efxrXVrIhE/TAX/elLvfuqZSk/UeuP9qJ9DfWpfbH8EOs7a81PnsvtCKul8ES1A/RG+GxfXs1EtxsrRfd886K+BTcIHhogRavqwrslW3CH3ESFAVZb/z1/0D1ChwYOcH2kqsbX6C6RIeIAr/xHmr3xJUxUebWIA7wcH79zjLpNtZTWUesVWuZthwD3IV6gexeyQsQ7eNEpQFeiiqpFvINdUlQRH+LQAF2JKuZ0gwPsmqIKbjdCahHXYLcm0xCcqMNTVHGM/vy7iAO8PjlAsYk6ZA62ja9giHkTFQd41StAkbUYqgY1cUOjXqAFnTYmTDjEVa4QQ8zBNlGJOoE72D9FFdxubnLsIk7Rvk2mIWZohBwTJjz6k9diuEFvw7WYeC5OZmgRQ2tQw7uYtBZrGGCYHfyGazFhouImE6IGNccBLlWIkxv054d30UOOWkwTYtwa1DK+nsI1OOwkg2Q7wIU/i7rgRI3+dYbpMkWKKlnazQQGGLbJNDIMDdxkQo4JU/IDHA4w3KC3JT7ApaxBDSdqpKf+yTxtiioJhwZO0RhjwpQsUadwB+OmqJJoLuYLMNEBDs/B+CmqJJiLqedgW/Q3cDlTVIn8sQ0eEzEHvS3qG7jcKapE/NgGn2RiHbbdotVi/hrUIn1sg2sw1ZgwRZmLuY5qWIRElZOiCm43A0LEAaZvMo3AiZr3qIbh0d8zRBxg2kFvC1iL0mpQw7vY48uaEo5qWKADnIyjGhako0o5qmEBalFqDWqDD3CSjmrYwLko66iGDfqGv/QUVXC76fRrG3lHNaz323B8kpExJkw9f22Dx4SEQW/rVYtl1KDW49c2eT586Q8PDc9Xi0oYEyZHR3Ulaild9NBJtVhWDWo4UWEtSnyi78IxF+2hIflxyQ8nqvVz6TJTVMHtZm7uIh4TsptMo0OilnNUw44+9ct+ou/iyNAouQY1nKg/tVjaUQ1zvNj4DrG8oxrmHBrnkKKK44z6UnyTaeBEhQVaXooquN2gqAsN0FWLlhJrUMPvblpkvpPpqkOilpuiCu6oB8rsooeO1GLJNajhofGj1DFh8oR4HgF6EvUcUlRxtJvym0wDDo3Sx4QJjP6yB73NqsXzqUGttYvntoPfjKFxLmPCNP76DfDrLAMcjab6f1K/yfsfhaE87xbrxe7If9wmIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiov/cX08aJw5PInkjAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=862.b26fd837.chunk.js.map