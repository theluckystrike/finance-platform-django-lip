"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[862],{6375:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(5043),l=t(3576),n=t(3216),r=t(5893),c=t(4193),o=t(579);const i=e=>{let{show:s,selected:t,handleClose:i,data:d,editingCategory:h,token:u,selectedPERnt:m,showDel:x}=e;(0,n.Zp)();const[p,b]=(0,r.aP)(),g=(0,c.A)(),[j,y]=(0,a.useState)(t),[f,v]=(0,a.useState)(m),[N,w]=(0,a.useState)(!1);(0,a.useEffect)((()=>{h?(y(h.name),v(m),w(!0)):(y(""),w(!1))}),[h,t]);return(0,o.jsx)(l.A,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:i,children:(0,o.jsxs)(l.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:[(0,o.jsx)("h4",{children:N?"Edit Category":"Create a Category"}),(0,o.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)("div",{className:"row mx-0 px-3",children:[(0,o.jsxs)("div",{className:"col-12 m-0",children:[(0,o.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category Name"}),(0,o.jsx)("input",{id:"category",name:"category",className:"form-control m-0",value:j,onChange:e=>y(e.target.value),required:!0})]}),(0,o.jsxs)("div",{className:"col-12",children:[(0,o.jsx)("label",{htmlFor:"parent_category",className:"form-label",children:"parent_category Category"}),(0,o.jsxs)("div",{className:"dropdown",children:[(0,o.jsx)("input",{type:"text",placeholder:"All",value:f.name,readOnly:!0}),(0,o.jsxs)("div",{className:"dropdown-content",style:{height:"200px",overflow:"auto"},children:[(0,o.jsx)("span",{className:"h6  ",children:(0,o.jsx)("span",{className:"hover-span text-muted",onClick:()=>v({name:"",id:""}),children:"Null"})}),d.length>0&&d.map(((e,s)=>(0,o.jsx)("span",{className:"h6  ",children:(0,o.jsx)("span",{className:"hover-span ",onClick:()=>v(e),children:e.name})},e.name)))]})]})]}),(0,o.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,o.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),N&&(0,o.jsx)("button",{onClick:async()=>{i(),x(h)},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,o.jsx)("button",{onClick:i,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"}),(0,o.jsx)("button",{onClick:async()=>{await p({token:u.access,id:h.id,data:{name:j,parent_category:f.id}}),g.SuccessToast("Category updated successfully"),i()},className:"btn btn-dark col-3 px-3 fw-bold",type:"button",children:"Save"})]})]})})})]})})}},3862:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(5043),l=t(3204),n=t(6375),r=t(8152),c=t(579);const o=function(e,s){const[t,o]=(0,a.useState)([]),[i,d]=(0,a.useState)(""),[h,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),g=e=>{o((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))},j=(e,s)=>{b(e),u(s),(e=>{d(e),x(!0)})(e)},[y,f]=(0,a.useState)(!1),[v,N]=(0,a.useState)({});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("ul",{className:"tree-class",children:e.map(((e,s)=>(0,c.jsx)("li",{children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("span",{onClick:()=>g(e.name),style:{cursor:"pointer"},children:[e.name,(0,c.jsx)(l.uO9,{onClick:s=>{s.stopPropagation(),j(e,{name:"",id:""})},style:{marginLeft:"8px",cursor:"pointer"}})]}),t.includes(e.name)&&e.subcategories&&(0,c.jsx)("ul",{children:e.subcategories.map(((s,a)=>(0,c.jsxs)("li",{children:[(0,c.jsxs)("span",{onClick:()=>g(s.name),style:{cursor:"pointer"},children:[s.name,(0,c.jsx)(l.uO9,{onClick:t=>{t.stopPropagation(),j(s,e)},style:{marginLeft:"8px",cursor:"pointer"}})]}),t.includes(s.name)&&s.subcategories&&(0,c.jsx)("ul",{children:s.subcategories.map(((e,t)=>(0,c.jsx)("li",{children:(0,c.jsx)("span",{onClick:()=>j({name:e.name},s),style:{cursor:"pointer"},children:e.name})},t)))})]},a)))})]})},s)))}),(0,c.jsx)(n.A,{show:m,handleClose:()=>{x(!1),b(null)},selected:i,selectedPERnt:h,editingCategory:p,data:e,token:s,showDel:e=>{N(e),f(!0)}}),(0,c.jsx)(r.A,{show:y,handleClose:()=>f(!1),token:s,data:v})]})},i=e=>{let{categoryFilter:s,token:t}=e;return(0,c.jsxs)("div",{className:"category-tree mx-auto w-25",children:[(0,c.jsx)("h3",{children:"Script Tree"}),o(s,t)]})};var d=t(3216),h=t(5061),u=t(5893);const m=()=>{const[e,s]=(0,a.useState)(JSON.parse(localStorage.getItem("login")));(0,a.useEffect)((()=>{localStorage.getItem("login")}),[]);const t=(0,d.Zp)(),{data:l,isError:n}=(0,u.HP)({token:e.access}),r=(null===l||void 0===l?void 0:l.results)||[],[o,m]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e={};r.forEach((s=>{e[s.id]={...s,subcategories:[]}})),r.forEach((s=>{if(null===s.parent_category);else{const t=Object.values(e).find((e=>e.id===s.parent_category));t&&t.subcategories.push(e[s.id])}}));const s=Object.values(e).filter((e=>null===e.parent_category));m(s)}),[r]),(0,c.jsxs)("div",{className:"m-4",children:[(0,c.jsxs)("div",{className:"d-flex justify-content-start flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-2 text-center",children:[(0,c.jsx)("button",{className:"btn mb-3",onClick:()=>t(-1),children:(0,c.jsx)(h.A,{icon:"ArrowBack",size:"45px",color:"dark"})})," ",(0,c.jsx)("h3",{className:"h1 fw-bold",children:"Script Tree By Category"})]}),(0,c.jsx)(i,{categoryFilter:o,token:e})]})}},8152:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(3576),l=t(3216),n=t(3003),r=t(5893),c=t(4193),o=t(579);const i=e=>{let{show:s,handleClose:t,data:i,token:d}=e;(0,l.Zp)(),(0,n.wA)();const[h,u]=(0,r.P8)(),m=(0,c.A)();return(0,o.jsx)(a.A,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:t,children:(0,o.jsx)(a.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)("div",{className:"row mx-0 px-3",children:[(0,o.jsx)("div",{className:"col-12 m-0"}),(0,o.jsxs)("div",{className:"col-12  ",children:[(0,o.jsx)("h4",{children:"Delete Category"}),(0,o.jsxs)("p",{children:["Are you sure you want to delete ",i.name," category?"]})]}),(0,o.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,o.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),(0,o.jsx)("button",{onClick:async()=>{await h({token:d.access,id:null===i||void 0===i?void 0:i.id}),m.SuccessToast("Category delete successfully"),t()},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,o.jsx)("button",{onClick:t,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"})]})]})})})})}}}]);
//# sourceMappingURL=862.59e6412b.chunk.js.map