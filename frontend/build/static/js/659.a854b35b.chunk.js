"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[659],{9033:(e,s,l)=>{l.d(s,{A:()=>t});l(5043);var a=l(579);const t=e=>{let{isoString:s}=e;const l=new Date(s).toLocaleString();return(0,a.jsx)(a.Fragment,{children:l})}},659:(e,s,l)=>{l.r(s),l.d(s,{default:()=>N});var a=l(5043),t=(l(1511),l(5061)),n=l(3576),c=l(3003),i=l(3892),o=l(899),d=l(3708),r=l(4193),m=l(579);const x={email:"",report:"",day:"1"},u=e=>{var s,l;let{show:t,handleClose:u}=e;const h=(0,c.wA)(),[p,v]=(0,a.useState)(null),j=(0,c.d4)((e=>e)),b=null===j||void 0===j||null===(s=j.report)||void 0===s||null===(l=s.reports)||void 0===l?void 0:l.results,y=(0,r.A)();(0,a.useEffect)((()=>{const e=localStorage.getItem("login");e&&v(JSON.parse(e))}),[]),(0,a.useEffect)((()=>{null!==p&&void 0!==p&&p.access&&(async()=>{try{await h((0,d.LT)({token:null===p||void 0===p?void 0:p.access}))}catch(e){console.error("Error fetching reports:",e)}})()}),[p,h]);const N=o.Ik({email:o.Yj().email("Invalid email format").required("Email is required"),report:o.Yj().required("Please select a report"),day:o.Yj().required("Please select a day")}),w=[{value:"1",label:"Monday"},{value:"2",label:"Tuesday"},{value:"3",label:"Wednesday"},{value:"4",label:"Thursday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"},{value:"7",label:"Sunday"},{value:"*",label:"Every Day"}];return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(n.A,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:t,onHide:u,children:(0,m.jsx)(n.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:(0,m.jsx)(i.l1,{initialValues:x,validationSchema:N,onSubmit:async e=>{await h((0,d.NK)({values:e,token:null===p||void 0===p?void 0:p.access})),y.SuccessToast("Schedules added successfully"),u()},children:()=>(0,m.jsx)(i.lV,{children:(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsxs)("div",{className:"row mx-0 px-5",children:[(0,m.jsxs)("div",{className:"col-6 m-0 px-4",children:[(0,m.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,m.jsx)(i.D0,{id:"email",name:"email",type:"email",className:"form-control m-0",required:!0}),(0,m.jsx)(i.Kw,{name:"email",component:"div",className:"text-danger"})]}),(0,m.jsxs)("div",{className:"col-6 m-0 px-4",children:[(0,m.jsx)("label",{htmlFor:"report",className:"form-label",children:"Add Reports"}),(0,m.jsxs)(i.D0,{as:"select",id:"report",name:"report",className:"form-select m-0",required:!0,children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"Select a report"}),b&&b.map(((e,s)=>(0,m.jsx)("option",{value:e.id,children:e.name},s)))]}),(0,m.jsx)(i.Kw,{name:"report",component:"div",className:"text-danger"})]}),(0,m.jsxs)("div",{className:"col-6 m-0 px-4",children:[(0,m.jsx)("label",{htmlFor:"day",className:"form-label",children:"Day of the Week"}),(0,m.jsxs)(i.D0,{as:"select",id:"day",name:"day",className:"form-select m-0",required:!0,children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"Select a day"}),w.map((e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,m.jsx)(i.Kw,{name:"day",component:"div",className:"text-danger"})]}),(0,m.jsxs)("div",{className:"col-6 row m-0 px-4",children:[(0,m.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Last Updated"}),(0,m.jsx)("button",{className:"btn btn-dark px-3 fw-bold form-control",type:"submit",children:"Apply"})]}),(0,m.jsx)("div",{className:"col-12 row mt-3 px-4",children:(0,m.jsx)("p",{className:"text-center",children:"All reports are sent at 12:00 PM UTC"})})]})})})})})})})};var h=l(3216),p=l(5475),v=l(3686),j=l(9033),b=l(6792);const y=e=>{let{show:s,handleClose:l,data:a,token:t}=e;(0,h.Zp)();const i=(0,c.wA)();return(0,m.jsx)(n.A,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:l,children:(0,m.jsx)(n.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:(0,m.jsx)("div",{className:"mb-3",children:(0,m.jsxs)("div",{className:"row mx-0 px-3",children:[(0,m.jsx)("div",{className:"col-12 m-0"}),(0,m.jsxs)("div",{className:"col-12  ",children:[(0,m.jsx)("h4",{children:"Delete Report"}),(0,m.jsxs)("p",{children:["Are you sure you want to delete ",a.name," report?"]})]}),(0,m.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,m.jsx)("button",{onClick:()=>{i((0,d.Kd)({token:t,id:a.id})),l()},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,m.jsx)("button",{onClick:l,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"})]})]})})})})},N=()=>{var e,s,l;const{id:n}=(0,h.g)(),i=(0,c.wA)(),[o,x]=(0,a.useState)(null),N=(0,r.A)();(0,a.useEffect)((()=>{const e=localStorage.getItem("login");e&&x(JSON.parse(e))}),[]),(0,a.useEffect)((()=>{i((0,v.r1)(!0));(async()=>{await i((0,d.S$)({id:n,token:null===o||void 0===o?void 0:o.access})),await i((0,v.Y0)({token:null===o||void 0===o?void 0:o.access})),i((0,v.r1)(!1))})()}),[o]);const w=(0,c.d4)((e=>e)),f=null===w||void 0===w||null===(e=w.report)||void 0===e?void 0:e.report,g=(null===w||void 0===w||null===(s=w.script)||void 0===s||null===(l=s.Scripts)||void 0===l?void 0:l.results)||[],{loading:k}=null===w||void 0===w?void 0:w.report,A=g.filter((e=>Array.isArray(null===f||void 0===f?void 0:f.scripts)&&f.scripts.includes(e.id))),[S,C]=(0,a.useState)({name:"",id:""}),[D,R]=(0,a.useState)(!1),[E,F]=(0,a.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mx-5 py-3",children:[(0,m.jsxs)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3",children:[(0,m.jsxs)("h1",{className:"h1",children:["Report Details ",(0,m.jsxs)("span",{id:"headerInfo",children:["(",f.name,")"]})]}),(0,m.jsxs)("div",{className:"btn-toolbar mb-2 mb-md-0",children:[(0,m.jsxs)("button",{onClick:()=>{R(!0)},type:"button",className:"btn icon-button my-1 mx-2",children:[(0,m.jsx)(t.A,{icon:"CalendarToday",size:"20px"}),(0,m.jsx)("span",{children:"Schedule Email"})]}),(0,m.jsxs)("button",{type:"button",className:"btn icon-button my-1 mx-2",children:[(0,m.jsx)(t.A,{icon:"RemoveRedEye",size:"20px"}),(0,m.jsx)("span",{children:"View Latest"})]}),(0,m.jsxs)("button",{type:"button",className:"btn icon-button my-1 mx-2",onClick:()=>F(!0),children:[(0,m.jsx)(t.A,{icon:"Delete",size:"20px"}),(0,m.jsx)("span",{children:"Delete"})]}),(0,m.jsxs)("button",{type:"button",className:"btn icon-button my-1 mx-2",children:[(0,m.jsx)(t.A,{icon:"SystemUpdateAlt",size:"20px"}),(0,m.jsx)("span",{children:"Update"})]}),(0,m.jsxs)("button",{type:"submit",className:"btn icon-button my-1 mx-2",children:[(0,m.jsx)(t.A,{icon:"Info",size:"20px"}),(0,m.jsx)("span",{children:"info"})]})]})]}),(0,m.jsx)("form",{className:"w-75",style:{maxWidth:"600px"},method:"post",encType:"multipart/form-data",children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{htmlFor:"category",className:"form-label",children:"Add report"}),(0,m.jsxs)("div",{className:"row mx-0 p-0",children:[(0,m.jsx)("div",{className:"col-10 m-0 p-0 pe-1",children:(0,m.jsxs)("div",{className:"dropdown",children:[(0,m.jsx)("input",{type:"text",placeholder:"All",value:S.name}),(0,m.jsx)("div",{className:"dropdown-content",style:{height:"200px",overflow:"auto"},children:g.map(((e,s)=>(0,m.jsx)("span",{onClick:()=>C({name:e.name,id:e.id}),className:"hover-span",children:e.name},s)))})]})}),(0,m.jsx)("button",{className:"btn btn-dark col col-2 p-0 fw-bold justify-content-center",type:"button",disabled:""==S.name,onClick:async()=>{await i((0,d.zg)({values:{name:f.name,scripts:[...f.scripts,S.id]},token:o.access,id:n})),N.SuccessToast("Update Report successfully")},children:"Add"})]})]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("form",{method:"post",id:"customReportForm",children:[(0,m.jsxs)("div",{className:"row mb-2 p-2 fw-bold w-100",children:[(0,m.jsx)("div",{className:"col-5",children:(0,m.jsxs)("h5",{children:[(0,m.jsx)("input",{type:"checkbox",id:"selectAllCheckbox"})," ","Name"]})}),(0,m.jsx)("div",{className:"col-2 mx-auto text-center",children:"Description"}),(0,m.jsx)("div",{className:"col-2 mx-auto text-center",children:"Category"}),(0,m.jsx)("div",{className:"col-2 mx-auto text-center",children:"Created"}),(0,m.jsx)("div",{className:"col-1 mx-auto text-center",children:"Remove"})]}),(0,m.jsx)("div",{id:"reportsCheckboxes",children:A?A.map((e=>{var s;return(0,m.jsxs)("div",{className:"row mb-2 p-3 table-card rounded-3 w-100 bg-light-green",children:[(0,m.jsx)("div",{className:"col-5",children:(0,m.jsx)(p.N_,{to:`/account/ScriptDetails/${e.id}`,className:"text-decoration-none text-black",children:(0,m.jsxs)("span",{className:"fw-bold fs-6",children:[(0,m.jsx)("input",{className:"chbx",type:"checkbox",name:"reports",value:e.id}),e.name]})},e.id)}),(0,m.jsx)("div",{className:"col-2 mx-auto text-center wrap-word",children:e.Description}),(0,m.jsx)("div",{className:"col-2 mx-auto text-center wrap-word",children:null===e||void 0===e||null===(s=e.category)||void 0===s?void 0:s.name}),(0,m.jsx)("div",{className:"col-2 mx-auto text-center",children:(0,m.jsx)(j.A,{isoString:e.created})}),(0,m.jsx)("div",{className:"col-1 mx-auto text-center",children:(0,m.jsx)("div",{onClick:()=>(async e=>{const s=f.scripts.filter((s=>s!==e));await i((0,d.zg)({values:{name:f.name,scripts:[...s]},token:o.access,id:n})),N.SuccessToast("Remove Script successfully")})(e.id),className:"bg-danger p-1 ms-auto",style:{width:"27px",borderRadius:"50%",color:"white"},children:"-"})})]})})):(0,m.jsx)(b.A,{})})]})})]}),(0,m.jsx)(u,{show:D,handleClose:()=>R(!1)}),(0,m.jsx)(y,{show:E,handleClose:()=>F(!1),data:f,token:null===o||void 0===o?void 0:o.access})]})}},1511:()=>{}}]);
//# sourceMappingURL=659.a854b35b.chunk.js.map