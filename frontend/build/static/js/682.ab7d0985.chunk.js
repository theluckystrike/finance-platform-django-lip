"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[682],{9632:(e,s,t)=>{t.d(s,{A:()=>n});var l=t(5043);const n=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const[t,n]=(0,l.useState)(s);return{items:(0,l.useMemo)((()=>{const s=[...e];return null!==t&&s.sort(((e,s)=>{const l=e[t.key],n=s[t.key];if(!isNaN(Date.parse(l))&&!isNaN(Date.parse(n))){const e=new Date(l),s=new Date(n);if(e<s)return"ascending"===t.direction?-1:1;if(e>s)return"ascending"===t.direction?1:-1}else{if(l<n)return"ascending"===t.direction?-1:1;if(l>n)return"ascending"===t.direction?1:-1}return 0})),s}),[e,t]),requestSort:e=>{let s="ascending";t&&t.key===e&&"ascending"===t.direction&&(s="descending"),n({key:e,direction:s})},getClassNamesFor:e=>t&&t.key===e?t.direction:"d-none",sortConfig:t}}},9033:(e,s,t)=>{t.d(s,{A:()=>n});t(5043);var l=t(579);const n=e=>{let{isoString:s}=e;const t=new Date(s).toLocaleString();return(0,l.jsx)(l.Fragment,{children:t})}},5682:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var l=t(5043),n=(t(1511),t(5061)),a=t(5475),r=t(3576),c=t(3003),o=t(3686),i=t(3516),d=t(899),m=t(7500),u=t(3708),x=t(579);const h=e=>{var s,t;let{show:n,handleClose:a,allreport:h}=e;const p=(0,c.wA)(),j=(0,c.d4)((e=>e)),[b,f]=(null===j||void 0===j||null===(s=j.script)||void 0===s||null===(t=s.Scripts)||void 0===t||t.results,(0,l.useState)(null));(0,l.useEffect)((()=>{const e=localStorage.getItem("login");e&&f(JSON.parse(e))}),[]),(0,l.useEffect)((()=>{if(b){(async()=>{try{await p((0,o.Y0)({token:null===b||void 0===b?void 0:b.access}))}catch(e){console.log(e)}})()}}),[b,p]);const g=h&&h.map((e=>({value:e.id,label:e.name}))),N=d.Ik({name:d.Yj().required("Name is required"),scripts:d.YO().of(d.Yj()).min(1,"At least one script must be selected")});return(0,x.jsx)(r.A,{size:"lg",fullscreen:"md-down","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:n,onHide:a,children:(0,x.jsxs)(r.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:[(0,x.jsx)("h5",{children:"Merge Reports"}),(0,x.jsx)(i.l1,{initialValues:{name:"",reports:[]},validationSchema:N,onSubmit:e=>{p((0,u.Mg)({values:e,token:b.access})),a()},children:e=>{let{setFieldValue:s,values:t}=e;return(0,x.jsx)(i.lV,{children:(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsxs)("div",{className:"row mx-0 px-3",children:[(0,x.jsxs)("div",{className:"col-12 m-0",children:[(0,x.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),(0,x.jsx)(i.D0,{id:"name",name:"name",className:"form-control m-0",required:!0}),(0,x.jsx)(i.Kw,{name:"name",component:"div",className:"text-danger"})]}),(0,x.jsxs)("div",{className:"col-12",children:[(0,x.jsx)("label",{htmlFor:"scripts",className:"form-label",children:"Reports"}),(0,x.jsx)(m.Ay,{id:"reports",name:"reports",isMulti:!0,options:g,onChange:e=>{const t=e?e.map((e=>e.value)):[];s("reports",t)},placeholder:"Select Scripts"}),(0,x.jsx)(i.Kw,{name:"scripts",component:"div",className:"text-danger"})]}),(0,x.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,x.jsx)("button",{onClick:a,className:"btn btn-dark col-5 px-3 fw-bold",type:"button",children:"Close"}),(0,x.jsx)("button",{type:"submit",className:"btn btn-dark col-5 px-3 fw-bold",children:"Create"})]})]})})})}})]})})};var p=t(9632),j=t(6792),b=t(9033);const f=()=>{var e,s;const t=(0,c.wA)(),[r,o]=(0,l.useState)(null),i=(0,c.d4)((e=>e)),{loading:d}=null===i||void 0===i?void 0:i.report,m=null===i||void 0===i||null===(e=i.report)||void 0===e||null===(s=e.reports)||void 0===s?void 0:s.results,{items:f,requestSort:g,getClassNamesFor:N}=(0,p.A)(m||[]);(0,l.useEffect)((()=>{const e=localStorage.getItem("login");e&&o(JSON.parse(e))}),[]),(0,l.useEffect)((()=>{if(r){(async()=>{try{await t((0,u.LT)({token:null===r||void 0===r?void 0:r.access}))}catch(e){console.log(e)}})()}}),[r]);const[v,w]=(0,l.useState)(!1),[y,S]=(0,l.useState)(!1);return(0,x.jsxs)("div",{className:"mx-4",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3",children:[(0,x.jsx)("h1",{className:"h1 fw-bold",children:"Reports "}),(0,x.jsx)("div",{className:"btn-toolbar mb-2 mb-md-0",children:(0,x.jsxs)("button",{onClick:()=>S(!0),type:"button",className:"btn icon-button my-1 mx-2",children:[(0,x.jsx)(n.A,{icon:"AddChart",size:"20px"}),(0,x.jsx)("span",{children:"Merge"})]})})]}),(0,x.jsx)("div",{children:f.length>0?(0,x.jsx)("div",{style:{overflow:"auto"},id:"customReportForm",children:(0,x.jsxs)("table",{className:"table",style:{minWidth:"1000px"},children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"fw-bold mb-2 p-2",children:[(0,x.jsx)("th",{scope:"col",className:"col-1",children:(0,x.jsx)("h5",{children:"Sr no."})}),(0,x.jsx)("th",{scope:"col",className:"col-7",children:(0,x.jsx)("h5",{children:"Report Name"})}),(0,x.jsx)("th",{scope:"col",className:"col-2 text-center mx-auto",children:"Created"}),(0,x.jsx)("th",{scope:"col",className:"col-2 text-center mx-auto",children:"Last Updated"})]})}),(0,x.jsx)("tbody",{id:"scriptsCheckboxes",children:f.map(((e,s)=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("tr",{className:"table-card rounded-3 bg-light-green mb-2 p-3",children:[(0,x.jsx)("td",{className:"col-1 fw-bold fs-6",children:s+1}),(0,x.jsx)("td",{className:"col-7 fw-bold fs-6",children:(0,x.jsx)(a.N_,{to:`/account/ReportDetails/${e.id}`,className:"text-decoration-none text-black",children:e.name})}),(0,x.jsx)("td",{className:"col-2 text-center mx-auto",children:(0,x.jsx)(b.A,{isoString:e.created})}),(0,x.jsx)("td",{className:"col-2 text-center mx-auto",children:(0,x.jsx)(b.A,{isoString:e.last_updated})})]},e.id),(0,x.jsx)("tr",{style:{height:"10px"}})]})))})]})}):(0,x.jsx)(j.A,{})}),(0,x.jsx)(h,{show:y,handleClose:()=>S(!1),allreport:m})]})}},1511:()=>{}}]);
//# sourceMappingURL=682.ab7d0985.chunk.js.map