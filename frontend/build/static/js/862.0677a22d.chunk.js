"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[862],{6375:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(5043),l=t(3576),n=t(3216),r=t(5893),c=t(4193),o=t(579);const i=e=>{let{show:s,selected:t,handleClose:i,data:d,editingCategory:u,token:m,selectedPERnt:h}=e;(0,n.Zp)();const[p,x]=(0,r.aP)(),[g,j]=(0,r.P8)(),y=(0,c.A)(),[b,f]=(0,a.useState)(t),[v,N]=(0,a.useState)(h),[C,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>{u?(f(u.name),N(h),k(!0)):(f(""),k(!1))}),[u,t]);return(0,o.jsx)(l.A,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:i,children:(0,o.jsxs)(l.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:[(0,o.jsx)("h4",{children:C?"Edit Category":"Create a Category"}),(0,o.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)("div",{className:"row mx-0 px-3",children:[(0,o.jsxs)("div",{className:"col-12 m-0",children:[(0,o.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category Name"}),(0,o.jsx)("input",{id:"category",name:"category",className:"form-control m-0",value:b,onChange:e=>f(e.target.value),required:!0})]}),(0,o.jsxs)("div",{className:"col-12",children:[(0,o.jsx)("label",{htmlFor:"parent_category",className:"form-label",children:"parent_category Category"}),(0,o.jsxs)("div",{className:"dropdown",children:[(0,o.jsx)("input",{type:"text",placeholder:"All",value:v.name,readOnly:!0}),(0,o.jsxs)("div",{className:"dropdown-content",style:{height:"200px",overflow:"auto"},children:[(0,o.jsx)("span",{className:"h6  ",children:(0,o.jsx)("span",{className:"hover-span text-muted",onClick:()=>N({name:"",id:""}),children:"Null"})}),d.length>0&&d.map(((e,s)=>(0,o.jsx)("span",{className:"h6  ",children:(0,o.jsx)("span",{className:"hover-span ",onClick:()=>N(e),children:e.name})},e.name)))]})]})]}),(0,o.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,o.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),C&&(0,o.jsx)("button",{onClick:async()=>{await g({token:m.access,id:u.id}),y.SuccessToast("Category delete successfully"),i()},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,o.jsx)("button",{onClick:i,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"}),(0,o.jsx)("button",{onClick:async()=>{await p({token:m.access,id:u.id,data:{name:b,parent_category:v.id}}),y.SuccessToast("Category updated successfully"),i()},className:"btn btn-dark col-3 px-3 fw-bold",type:"button",children:"Save"})]})]})})})]})})}},3862:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(5043),l=t(3204),n=t(6375),r=t(579);const c=function(e,s){const[t,c]=(0,a.useState)([]),[o,i]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null),g=e=>{c((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))},j=(e,s)=>{x(e),u(s),(e=>{i(e),h(!0)})(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{className:"tree-class",children:e.map(((e,s)=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{onClick:()=>g(e.name),style:{cursor:"pointer"},children:[e.name,(0,r.jsx)(l.uO9,{onClick:s=>{s.stopPropagation(),j(e,{name:"",id:""})},style:{marginLeft:"8px",cursor:"pointer"}})]}),t.includes(e.name)&&e.subcategories&&(0,r.jsx)("ul",{children:e.subcategories.map(((s,a)=>(0,r.jsxs)("li",{children:[(0,r.jsxs)("span",{onClick:()=>g(s.name),style:{cursor:"pointer"},children:[s.name,(0,r.jsx)(l.uO9,{onClick:t=>{t.stopPropagation(),j(s,e)},style:{marginLeft:"8px",cursor:"pointer"}})]}),t.includes(s.name)&&s.subcategories&&(0,r.jsx)("ul",{children:s.subcategories.map(((e,t)=>(0,r.jsx)("li",{children:(0,r.jsx)("span",{onClick:()=>j({name:e.name},s),style:{cursor:"pointer"},children:e.name})},t)))})]},a)))})]})},s)))}),(0,r.jsx)(n.A,{show:m,handleClose:()=>{h(!1),x(null)},selected:o,selectedPERnt:d,editingCategory:p,data:e,token:s})]})},o=e=>{let{categoryFilter:s,token:t}=e;return(0,r.jsxs)("div",{className:"category-tree mx-auto w-25",children:[(0,r.jsx)("h3",{children:"Script Tree"}),c(s,t)]})};var i=t(3216),d=t(5061),u=t(5893);const m=()=>{const[e,s]=(0,a.useState)(JSON.parse(localStorage.getItem("login")));(0,a.useEffect)((()=>{localStorage.getItem("login")}),[]);const t=(0,i.Zp)(),{data:l,isError:n}=(0,u.HP)({token:e.access}),c=(null===l||void 0===l?void 0:l.results)||[],[m,h]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const e={};c.forEach((s=>{e[s.id]={...s,subcategories:[]}})),c.forEach((s=>{if(null===s.parent_category);else{const t=Object.values(e).find((e=>e.id===s.parent_category));t&&t.subcategories.push(e[s.id])}}));const s=Object.values(e).filter((e=>null===e.parent_category));h(s)}),[c]),(0,r.jsxs)("div",{className:"m-4",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-start flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-2 text-center",children:[(0,r.jsx)("button",{className:"btn mb-3",onClick:()=>t(-1),children:(0,r.jsx)(d.A,{icon:"ArrowBack",size:"45px",color:"dark"})})," ",(0,r.jsx)("h3",{className:"h1 fw-bold",children:"Script Tree By Category"})]}),(0,r.jsx)(o,{categoryFilter:m,token:e})]})}}}]);
//# sourceMappingURL=862.0677a22d.chunk.js.map