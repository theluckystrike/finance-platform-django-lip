"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[571],{6375:(e,s,t)=>{t.d(s,{A:()=>o});var l=t(5043),a=t(3576),n=t(3216),r=t(579);const o=e=>{let{show:s,selected:t,handleClose:o,editingCategory:c}=e;(0,n.Zp)();const[i,d]=(0,l.useState)(t),[u,m]=(0,l.useState)(""),[h,x]=(0,l.useState)(!1);(0,l.useEffect)((()=>{c?(d(c),x(!0)):(d(""),x(!1))}),[c,t]);return(0,r.jsx)(a.A,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:s,onHide:o,children:(0,r.jsxs)(a.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:[(0,r.jsx)("h4",{children:h?"Edit Category":"Create a Category"}),(0,r.jsx)("form",{method:"post",encType:"multipart/form-data",children:(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsxs)("div",{className:"row mx-0 px-3",children:[(0,r.jsxs)("div",{className:"col-12 m-0",children:[(0,r.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category Name"}),(0,r.jsx)("input",{id:"category",name:"category",className:"form-control m-0",value:i,onChange:e=>d(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"col-12 m-0",children:[(0,r.jsx)("label",{htmlFor:"parentCategory",className:"form-label",children:"Parent Category"}),(0,r.jsxs)("select",{id:"parentCategory",name:"parentCategory",className:"form-select m-0",value:u,onChange:e=>m(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"All"}),(0,r.jsx)("option",{value:"Returns",children:"Returns"}),(0,r.jsx)("option",{value:"USD",children:"USD"}),(0,r.jsx)("option",{value:"Bonds",children:"Bonds"}),(0,r.jsx)("option",{value:"CAD",children:"CAD"}),(0,r.jsx)("option",{value:"Breadth",children:"Breadth"})]})]}),(0,r.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,r.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Actions"}),h&&(0,r.jsx)("button",{onClick:()=>{console.log("Deleting category:",i),o()},className:"btn btn-danger col-3 px-3 fw-bold",type:"button",children:"Delete"}),(0,r.jsx)("button",{onClick:o,className:"btn btn-light border border-2 border-dark col-3 px-3 fw-bold",type:"button",children:"Close"}),(0,r.jsx)("button",{onClick:()=>{console.log("Saving category:",i,"Parent Category:",u),o()},className:"btn btn-dark col-3 px-3 fw-bold",type:"button",children:"Save"})]})]})})})]})})}},4571:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var l=t(5043),a=t(3204),n=t(6375),r=t(579);const o=function(e){const[s,t]=(0,l.useState)([]),[o,c]=(0,l.useState)(""),[i,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(null),h=e=>{c(e),d(!0)},x=e=>{t((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))},g=e=>{m(e),h(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{className:"tree-class",children:e.map(((e,t)=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{onClick:()=>x(e.name),style:{cursor:"pointer"},children:[e.name,(0,r.jsx)(a.uO9,{onClick:s=>{s.stopPropagation(),g(e.name)},style:{marginLeft:"8px",cursor:"pointer"}})]}),s.includes(e.name)&&e.subcategories&&(0,r.jsx)("ul",{children:e.subcategories.map(((e,t)=>(0,r.jsxs)("li",{children:[(0,r.jsxs)("span",{onClick:()=>x(e.name),style:{cursor:"pointer"},children:[e.name,(0,r.jsx)(a.uO9,{onClick:s=>{s.stopPropagation(),g(e.name)},style:{marginLeft:"8px",cursor:"pointer"}})]}),s.includes(e.name)&&e.subcategories&&(0,r.jsx)("ul",{children:e.subcategories.map(((e,s)=>(0,r.jsx)("li",{children:(0,r.jsx)("span",{onClick:()=>h(e),style:{cursor:"pointer"},children:e.name})},s)))})]},t)))})]})},t)))}),(0,r.jsx)(n.A,{show:i,handleClose:()=>{d(!1),m(null)},selected:o,editingCategory:u})]})},c=e=>{let{categoryFilter:s}=e;return(0,r.jsxs)("div",{className:"category-tree mx-auto w-25",children:[(0,r.jsx)("h3",{children:"Category Tree"}),o(s)]})};var i=t(3216),d=t(5061),u=t(5893),m=t(2879);const h=()=>{const e=(0,i.Zp)(),{data:s,isError:t}=(0,u.HP)({token:m.V.access}),a=(null===s||void 0===s?void 0:s.categories)||[],[n,o]=(0,l.useState)([]);return(0,l.useEffect)((()=>{const e={};a.forEach((s=>{e[s.id]={...s,subcategories:[]}})),a.forEach((s=>{if(null===s.parent_name);else{const t=Object.values(e).find((e=>e.name===s.parent_name));t&&t.subcategories.push(e[s.id])}}));const s=Object.values(e).filter((e=>null===e.parent_name));console.log(s),o(s)}),[a]),(0,r.jsxs)("div",{className:"m-4",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-start flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-2 text-center",children:[(0,r.jsx)("button",{className:"btn mb-3",onClick:()=>e(-1),children:(0,r.jsx)(d.A,{icon:"ArrowBack",size:"45px",color:"dark"})})," ",(0,r.jsx)("h3",{className:"h1 fw-bold",children:"Category manager"})]}),(0,r.jsx)(c,{categoryFilter:n})]})}}}]);
//# sourceMappingURL=571.7745e9ec.chunk.js.map