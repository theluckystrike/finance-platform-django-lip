"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[618],{4618:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var s=t(5043),l=t(3516),r=t(899),o=t(5061),n=t(3576),i=t(3216),c=t(3219),d=t(5893),m=t(2879),u=t(8672),p=t(7379),h=t(4193),x=t(579);const g=e=>{let{show:a,handleClose:t,categoryFilter:o}=e;const[g,{isLoading:y,isSuccess:j,isError:v,error:f,data:N}]=(0,d.HE)(),[b,w]=(0,p.rO)(),I=(0,i.Zp)(),[A,k]=(0,s.useState)(""),C=(0,h.A)(),S=(0,l.Wx)({initialValues:{name:"",category:"",parentName:""},validationSchema:r.Ik({name:r.Yj().required("Category name is required")}),onSubmit:e=>{g({token:m.V.access,data:{...e,parent_category:e.category}}),t()}});(0,s.useEffect)((()=>{j&&C.SuccessToast("New Category added successfully"),v&&(null!==f&&void 0!==f&&f.data?C.ErrorToast("Please login again."):console.log("An unknown error occurred."))}),[j,v,f,N]);const[F,q]=(0,s.useState)([]),[E,V]=(0,s.useState)(!1),D=e=>{const a=e.trim();if(""!==a){const e=o.filter((e=>e.name.toLowerCase().includes(a.toLowerCase())));console.log(e,"res"),q(e)}else q([])};return(0,s.useEffect)((()=>{D(S.values.parentName)}),[S.values.parentName]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(n.A,{size:"lg",fullscreen:"md-down","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:t,children:(0,x.jsx)(n.A.Body,{className:"bg-light-green",style:{borderRadius:"25px",overflow:"hidden"},children:(0,x.jsx)("form",{onSubmit:S.handleSubmit,encType:"multipart/form-data",children:(0,x.jsx)("div",{className:"mb-3",children:(0,x.jsxs)("div",{className:"row mx-0 px-3",children:[(0,x.jsxs)("div",{className:"col-12 m-0",children:[(0,x.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category Name"}),(0,x.jsx)("input",{id:"name",name:"name",className:"form-control m-0",required:!0,value:S.values.name,onChange:S.handleChange,onBlur:S.handleBlur}),S.touched.name&&S.errors.name?(0,x.jsx)("div",{className:"text-danger",children:S.errors.name}):null]}),(0,x.jsxs)("div",{className:"col-12",children:[(0,x.jsx)("label",{htmlFor:"category",className:"form-label",children:"Parent Category"}),(0,x.jsxs)("div",{className:"dropdown",children:[(0,x.jsx)("div",{className:"arrow_down",children:(0,x.jsx)("img",{src:u,alt:""})}),(0,x.jsx)("input",{type:"text",placeholder:"Select a category",value:S.values.parentName,onChange:e=>{S.setFieldValue("parentName",e.target.value),D(e.target.value)},className:"form-control "+(S.touched.category&&S.errors.category?"input-error":"")}),(0,x.jsx)("div",{className:"dropdown-content",style:{maxHeight:"200px",overflow:"auto",display:F.length>0?"block":"none"},children:F.length>0&&F.map(((e,a)=>(0,x.jsx)("span",{className:"h6 hover-span",onClick:async()=>{await S.setFieldValue("parentName",e.name),await S.setFieldValue("category",e.id),q([])},children:e.name},e.name)))})]})]}),(0,x.jsxs)("div",{className:"col-12 row justify-content-evenly m-0",children:[(0,x.jsx)("label",{style:{height:"33px"},htmlFor:"category",className:"invisible",children:"Last Updated"}),(0,x.jsx)("button",{onClick:()=>I(`/account/${c.on.CategoryManager.path}`),className:"btn border border-dark col-5 px-3 fw-bold",type:"button",children:"Edit All Category"}),(0,x.jsx)("button",{className:"btn btn-dark col-5 px-3 fw-bold",type:"submit",children:"Create"})]})]})})})})})})};var y=t(3003),j=t(3686);const v=r.Ik({category:r.Yj().required("Category is required"),output_type:r.Yj().required("Output type is required"),name:r.Yj().required("Script name is required"),file:r.gl().required("File is required")}),f=()=>{const e=(0,y.wA)(),[a,t]=(0,s.useState)(null),r=(0,s.useRef)(null);(0,s.useEffect)((()=>{const e=localStorage.getItem("login");e&&t(JSON.parse(e))}),[]);const{data:n,isError:i}=(0,d.HP)({token:null===a||void 0===a?void 0:a.access,page_no:1,page_size:1e3},{skip:!a}),c=(null===n||void 0===n?void 0:n.results)||[],m=(0,h.A)(),[f,N]=(0,s.useState)([]),{data:b,error:w,isLoading:I}=(0,p.zZ)({token:null===a||void 0===a?void 0:a.access,page_no:1,page_size:1e3},{skip:!a}),[A,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(""),F=(0,l.Wx)({initialValues:{category:"",output_type:"",name:"",file:null,description:"",parentName:""},validationSchema:v,onSubmit:async(t,s)=>{let{resetForm:l}=s;const o=new FormData;o.append("category",t.category),o.append("output_type","plt"),o.append("name",t.name),o.append("file",t.file),o.append("description",t.description),await e((0,j.Zj)({formData:o,token:null===a||void 0===a?void 0:a.access})),l(),r.current.value="",m.SuccessToast("New Script added successfully")}}),[q,E]=(0,s.useState)([]),[V,D]=(0,s.useState)(!1),Q=e=>{const a=e.trim();if(""!==a){const e=c.filter((e=>e.name.toLowerCase().includes(a.toLowerCase())));console.log(e,"res"),E(e)}else E([])};return(0,s.useEffect)((()=>{Q(F.values.parentName)}),[F.values.parentName]),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"UploadScript_main_wrap mt-3",children:[(0,x.jsx)("h1",{className:"h1 fw-bold",children:"Upload a Script"}),(0,x.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,x.jsxs)("form",{className:"w-75",style:{maxWidth:"600px"},onSubmit:F.handleSubmit,encType:"multipart/form-data",children:[(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category"}),(0,x.jsxs)("div",{className:"row mx-0 p-0",children:[(0,x.jsx)("div",{className:"col-10 col-sm-10 col-md-11 m-0 p-0 pe-1",children:(0,x.jsxs)("div",{className:"dropdown",children:[(0,x.jsx)("div",{className:"arrow_down",children:(0,x.jsx)("img",{src:u,alt:""})}),(0,x.jsx)("input",{type:"text",placeholder:"Select a category",value:F.values.parentName,onChange:e=>{F.setFieldValue("parentName",e.target.value),Q(e.target.value)},className:"form-control "+(F.touched.category&&F.errors.category?"input-error":"")}),(0,x.jsx)("div",{className:"dropdown-content",style:{maxHeight:"200px",overflow:"auto",display:q.length>0?"block":"none"},children:q.length>0&&q.map(((e,a)=>(0,x.jsx)("span",{className:"h6 hover-span",onClick:async()=>{await F.setFieldValue("parentName",e.name),await F.setFieldValue("category",e.id),E([])},children:e.name},e.name)))})]})}),(0,x.jsx)("button",{className:"btn btn-dark col-2 col-sm-2 col-md-1 p-0 justify-content-center",type:"button",onClick:()=>k(!0),children:(0,x.jsx)(o.A,{icon:"Add",size:"30px"})}),F.touched.category&&F.errors.category?(0,x.jsx)("div",{className:"error-message",children:F.errors.category}):null]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"output_type",className:"form-label",children:"How would you like to view data?"}),(0,x.jsxs)("div",{className:"dropdown",children:[(0,x.jsx)("div",{className:"arrow_down",children:(0,x.jsx)("img",{src:u,alt:""})}),(0,x.jsx)("input",{type:"text",id:"output_type",placeholder:"Select a view data type",value:F.values.output_type,readOnly:!0,onFocus:()=>D(!0),className:"form-control "+(F.touched.output_type&&F.errors.output_type?"input-error":"")}),(0,x.jsxs)("div",{className:"dropdown-content",style:{maxHeight:"200px",overflow:"auto",display:V?"block":"none"},children:[(0,x.jsx)("span",{className:"hover-span",onClick:async()=>{await F.setFieldValue("output_type","pd"),D(!1)},children:"Chart"}),(0,x.jsx)("span",{className:"hover-span",onClick:async()=>{await F.setFieldValue("output_type","plt"),D(!1)},children:"Table"}),(0,x.jsx)("span",{className:"hover-span",onClick:async()=>{await F.setFieldValue("output_type","pd plt"),D(!1)},children:"Chart and Table"})]}),F.touched.output_type&&F.errors.output_type?(0,x.jsx)("div",{className:"error-message",children:F.errors.output_type}):null]})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{htmlFor:"name",className:"form-label",children:"Script name"}),(0,x.jsx)("input",{type:"text",id:"name",placeholder:"Enter script name",className:"form-control "+(F.touched.name&&F.errors.name?"input-error":""),...F.getFieldProps("name")}),F.touched.name&&F.errors.name?(0,x.jsx)("div",{className:"error-message",children:F.errors.name}):null]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsxs)("label",{htmlFor:"file",className:"form-label",title:"Select only .py files",children:["Select a file ",(0,x.jsx)(o.A,{icon:"InfoOutline",size:"18px"})]}),(0,x.jsx)("input",{type:"file",id:"file",name:"file",ref:r,accept:".py",className:"form-control "+(F.touched.file&&F.errors.file?"input-error":""),onChange:e=>F.setFieldValue("file",e.target.files[0])}),F.touched.file&&F.errors.file?(0,x.jsx)("div",{className:"error-message",children:F.errors.file}):null]}),(0,x.jsxs)("div",{className:"mx-auto text-center d-flex justify-content-between row ",children:[(0,x.jsx)("button",{type:"submit",className:"btn btn-dark my-1 first-line:col-12 col-sm-12 col-md-5",children:"Upload"}),(0,x.jsx)("button",{type:"reset",className:"btn btn-light bordered-button my-1  col-12 col-sm-12 col-md-5",onClick:()=>F.resetForm(),children:"Reset"})]})]}),(0,x.jsx)(g,{show:A,handleClose:()=>k(!1),categoryFilter:c})]})]})})}},8672:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAaVBMVEX///8AAADm5ubz8/MkJCQwMDD19fXw8PBXV1dQUFBZWVlTU1MuLi4pKSlYWFgmJiZeXl5mZmbExMRLS0vd3d2Dg4MfHx+tra2YmJjQ0NDh4eEODg6MjIxvb2/r6+toaGgYGBhDQ0M6OjoUjT9JAAAEKUlEQVR4nO3c6VbqMBQFYApaJgcUUVQcru//kBdvjCXNTihthhPu/n63y5yVM6QFHI2IiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIqHj3m9l6tX3IvYwTPWxX69nmvsOVL6vqn9ddHX1VAe1e1bJXR3fm4brSbiYplhbG2++qX5/9V74/Vo35NM3yBqs/Dlb9+O69dlMdmheSqHfGqje+S6efxrXVrIhE/TAX/elLvfuqZSk/UeuP9qJ9DfWpfbH8EOs7a81PnsvtCKul8ES1A/RG+GxfXs1EtxsrRfd886K+BTcIHhogRavqwrslW3CH3ESFAVZb/z1/0D1ChwYOcH2kqsbX6C6RIeIAr/xHmr3xJUxUebWIA7wcH79zjLpNtZTWUesVWuZthwD3IV6gexeyQsQ7eNEpQFeiiqpFvINdUlQRH+LQAF2JKuZ0gwPsmqIKbjdCahHXYLcm0xCcqMNTVHGM/vy7iAO8PjlAsYk6ZA62ja9giHkTFQd41StAkbUYqgY1cUOjXqAFnTYmTDjEVa4QQ8zBNlGJOoE72D9FFdxubnLsIk7Rvk2mIWZohBwTJjz6k9diuEFvw7WYeC5OZmgRQ2tQw7uYtBZrGGCYHfyGazFhouImE6IGNccBLlWIkxv054d30UOOWkwTYtwa1DK+nsI1OOwkg2Q7wIU/i7rgRI3+dYbpMkWKKlnazQQGGLbJNDIMDdxkQo4JU/IDHA4w3KC3JT7ApaxBDSdqpKf+yTxtiioJhwZO0RhjwpQsUadwB+OmqJJoLuYLMNEBDs/B+CmqJJiLqedgW/Q3cDlTVIn8sQ0eEzEHvS3qG7jcKapE/NgGn2RiHbbdotVi/hrUIn1sg2sw1ZgwRZmLuY5qWIRElZOiCm43A0LEAaZvMo3AiZr3qIbh0d8zRBxg2kFvC1iL0mpQw7vY48uaEo5qWKADnIyjGhako0o5qmEBalFqDWqDD3CSjmrYwLko66iGDfqGv/QUVXC76fRrG3lHNaz323B8kpExJkw9f22Dx4SEQW/rVYtl1KDW49c2eT586Q8PDc9Xi0oYEyZHR3Ulaild9NBJtVhWDWo4UWEtSnyi78IxF+2hIflxyQ8nqvVz6TJTVMHtZm7uIh4TsptMo0OilnNUw44+9ct+ou/iyNAouQY1nKg/tVjaUQ1zvNj4DrG8oxrmHBrnkKKK44z6UnyTaeBEhQVaXooquN2gqAsN0FWLlhJrUMPvblpkvpPpqkOilpuiCu6oB8rsooeO1GLJNajhofGj1DFh8oR4HgF6EvUcUlRxtJvym0wDDo3Sx4QJjP6yB73NqsXzqUGttYvntoPfjKFxLmPCNP76DfDrLAMcjab6f1K/yfsfhaE87xbrxe7If9wmIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiov/cX08aJw5PInkjAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=618.65cf13ae.chunk.js.map